<!--
 * @Description: 
 * @Version: 2.0
 * @Autor: Seven
 * @Date: 2020-09-10 10:24:45
 * @LastEditors: Seven
 * @LastEditTime: 2020-10-14 22:37:35
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/bootcss/bootstrap.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/echarts.min.js"></script>
</head>
<body>
      <div>
        <h2 class="cont-title">
            年龄分布与类罪、个罪关系分布

        </h2>
        <h2 class="cont-title">
            各类罪年龄分布
            <div class="dropdown" style="float:right">
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                  <span>请选择</span>
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" id ="dropdown-menu1" aria-labelledby="dropdownMenu1">
                </ul>
              </div>
              <!-- <a class="cont-next cont-home" href="../home.html">
                首页
              </a>
              <a class="cont-next cont-pre" href="./education.html">
                上一页
            </a>
            <a class="cont-next" href="./province.html">
                下一页 -->
            </a>
        </h2>
        <div id="echart1" style="width: 100%;height: 300px;border-bottom: 2px dashed #4ddefe;margin-bottom: 24px;"></div>
         <div style="display: flex;">
        <div class="age-chart-width">
            <h2 class="cont-title">
                渎职罪个罪年龄分布
                <div class="dropdown" style="float:right">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    <span>请选择</span>
                    <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id ="dropdown-menu2" aria-labelledby="dropdownMenu">
                    </ul>
                </div>
            </h2>
            <div id="echart2" style="width: 100%;height: 300px;"></div>
        </div>
        <div class="age-chart-width">
            <h2 class="cont-title">
                危害国家安全罪个罪年龄分布
                <div class="dropdown" style="float:right">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu3" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    <span>请选择</span>
                    <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id ="dropdown-menu3" aria-labelledby="dropdownMenu">
                    </ul>
                </div>
            </h2>
            <div id="echart3" style="width: 100%;height: 300px;"></div>
        </div>
        <div class="age-chart-width">
            <h2 class="cont-title">
                侵犯财产罪个罪年龄分布
                <div class="dropdown" style="float:right">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu4" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    <span>请选择</span>
                    <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id ="dropdown-menu4" aria-labelledby="dropdownMenu">
                    </ul>
                </div>
            </h2>
            <div id="echart4" style="width: 100%;height: 300px;"></div>
        </div>
         </div>

         <div style="display: flex;">
        <div class="age-chart-width">
            <h2 class="cont-title">
                危害国防利益罪个罪年龄分布
                <div class="dropdown" style="float:right">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu5" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    <span>请选择</span>
                    <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id ="dropdown-menu5" aria-labelledby="dropdownMenu">
                    </ul>
                </div>
            </h2>
            <div id="echart5" style="width: 100%;height: 300px;"></div>
        </div>
        <div class="age-chart-width">
            <h2 class="cont-title">
                危害公共安全罪个罪年龄分布
                <div class="dropdown" style="float:right">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu6" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    <span>请选择</span>
                    <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id ="dropdown-menu6" aria-labelledby="dropdownMenu4">
                    </ul>
                </div>
            </h2>
            <div id="echart6" style="width: 100%;height: 300px;"></div>
        </div>
        <div class="age-chart-width">
            <h2 class="cont-title">
                破坏社会主义市场经济秩序罪个罪年龄分布
                <div class="dropdown" style="float:right">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu7" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    <span>请选择</span>
                    <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id ="dropdown-menu7" aria-labelledby="dropdownMenu4">
                    </ul>
                </div>
            </h2>
            <div id="echart7" style="width: 100%;height: 300px;"></div>
        </div>
         </div>
         <div style="display: flex;">
        <div class="age-chart-width">
            <h2 class="cont-title">
                侵犯公民人身权利、民主权利罪个罪年龄分布
                <div class="dropdown" style="float:right">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu8" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    <span>请选择</span>
                    <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id ="dropdown-menu8" aria-labelledby="dropdownMenu">
                    </ul>
                </div>
            </h2>
            <div id="echart8" style="width: 100%;height: 300px;"></div>
        </div>
        <div class="age-chart-width">
            <h2 class="cont-title">
                贪污贿赂罪个罪年龄分布
                <div class="dropdown" style="float:right">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu9" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    <span>请选择</span>
                    <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id ="dropdown-menu9" aria-labelledby="dropdownMenu">
                    </ul>
                </div>
            </h2>
            <div id="echart9" style="width: 100%;height: 300px;"></div>
        </div>
        <div class="age-chart-width">
            <h2 class="cont-title">
                妨害社会管理秩序罪个罪年龄分布
                <div class="dropdown" style="float:right">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu10" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    <span>请选择</span>
                    <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id ="dropdown-menu10" aria-labelledby="dropdownMenu">
                    </ul>
                </div>
            </h2>
            <div id="echart10" style="width: 100%;height: 300px;"></div>
        </div>
         </div>

        <div class="age-chart-width">
            <h2 class="cont-title">
                侵军人违反职责罪个罪年龄分布
                <div class="dropdown" style="float:right">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu11" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    <span>请选择</span>
                    <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id ="dropdown-menu11" aria-labelledby="dropdownMenu">
                    </ul>
                </div>
            </h2>
            <div id="echart11" style="width: 100%;height: 300px;"></div>
        </div>
    
    
      
</body>
<script>
     $(function(){
        //类罪及其判决数量
        loadCategroyFault();
        loadPersonalAge();
    })

    function loadCategroyFault(){
        $.ajax({
                url:"../data/penalty_age_num_0913.json",
                type: "GET", //请求方式为get
  			    dataType: "json", //返回数据格式为json
  		        success: function(data) { //请求成功完成后要执行的方法 
  				            //each循环 使用$.each方法遍历返回的数据date
                    // loadCategroyFaultChart(data);
                    var html = ''
                    data.forEach(element => {
                        if (!!element.penalty_class){
                         html =  "<li><a>"+element.penalty_class+"</a></li><li role='separator' class='divider'></li>"
                         $("#dropdown-menu1").append(html);
                        }
                    });
                    $("#dropdownMenu1 span").eq(0).html(data[0].penalty_class);
                    loadPersonalFault(data[0].penalty_class,1);
                    chooseClick();
  		    	}
            })
    }
    function loadPersonalAge(){
        $.ajax({
                url:"../data/penalty_class_definite_age_num_0913.json",
                type: "GET", //请求方式为get
  			    dataType: "json", //返回数据格式为json
  		        success: function(data) { //请求成功完成后要执行的方法 
  				    //each循环 使用$.each方法遍历返回的数据date
                    // loadCategroyFaultChart(data);
                    data.forEach((element,index) => {
                        var html = ''
                        element.penalty_definite_age.forEach((inele,i) => {
                            console.log(i);
                            if (!!inele.penalty_name_definite){
                                html =  "<li><a>"+inele.penalty_name_definite+"</a></li><li role='separator' class='divider'></li>"
                                 $("#dropdown-menu"+(index+2)).append(html);
                            }
                        });
                        $('#dropdownMenu'+ (index+2) +' span').eq(0).html(element.penalty_definite_age[0].penalty_name_definite);
                        loadPersonalFault(element.penalty_definite_age[0].penalty_name_definite,index+2);
                    });
                    chooseClick();
  		    	}
            })
    }
    function chooseClick(){
        
        $("#dropdown-menu1 li").each(function(index){
            $(this).on("click",function(event){
            console.log("event",event);
            $("#dropdownMenu1 span").eq(0).html($(this).text());
                if (!$(this).hasClass("active")){
                    $("#dropdown-menu1 li").removeClass("active");
                    $(this).addClass("active");
                    loadPersonalFault($(this).text(),1);
                }
            })
        })

        $("#dropdown-menu2 li").each(function(index){
            $(this).on("click",function(event){
            console.log("event",event);
            $("#dropdownMenu2 span").eq(0).html($(this).text());
                if (!$(this).hasClass("active")){
                    $("#dropdown-menu2 li").removeClass("active");
                    $(this).addClass("active");
                    loadPersonalFault($(this).text(),2);
                }
            })
        })

        $("#dropdown-menu3 li").each(function(index){
            $(this).on("click",function(event){
            console.log("event",event);
            $("#dropdownMenu3 span").eq(0).html($(this).text());
                if (!$(this).hasClass("active")){
                    $("#dropdown-menu3 li").removeClass("active");
                    $(this).addClass("active");
                    loadPersonalFault($(this).text(),3);
                }
            })
        })


        $("#dropdown-menu4 li").each(function(index){
            $(this).on("click",function(event){
            console.log("event",event);
            $("#dropdownMenu4 span").eq(0).html($(this).text());
                if (!$(this).hasClass("active")){
                    $("#dropdown-menu4 li").removeClass("active");
                    $(this).addClass("active");
                    loadPersonalFault($(this).text(),4);
                }
            })
        })


        $("#dropdown-menu5 li").each(function(index){
            $(this).on("click",function(event){
            console.log("event",event);
            $("#dropdownMenu5 span").eq(0).html($(this).text());
                if (!$(this).hasClass("active")){
                    $("#dropdown-menu5 li").removeClass("active");
                    $(this).addClass("active");
                    loadPersonalFault($(this).text(),5);
                }
            })
        })

        $("#dropdown-menu6 li").each(function(index){
            $(this).on("click",function(event){
            console.log("event",event);
            $("#dropdownMenu6 span").eq(0).html($(this).text());
                if (!$(this).hasClass("active")){
                    $("#dropdown-menu6 li").removeClass("active");
                    $(this).addClass("active");
                    loadPersonalFault($(this).text(),6);
                }
            })
        })

        $("#dropdown-menu7 li").each(function(index){
            $(this).on("click",function(event){
            console.log("event",event);
            $("#dropdownMenu7 span").eq(0).html($(this).text());
                if (!$(this).hasClass("active")){
                    $("#dropdown-menu7 li").removeClass("active");
                    $(this).addClass("active");
                    loadPersonalFault($(this).text(),7);
                }
            })
        })

        $("#dropdown-menu8 li").each(function(index){
            $(this).on("click",function(event){
            console.log("event",event);
            $("#dropdownMenu8 span").eq(0).html($(this).text());
                if (!$(this).hasClass("active")){
                    $("#dropdown-menu8 li").removeClass("active");
                    $(this).addClass("active");
                    loadPersonalFault($(this).text(),8);
                }
            })
        })

        $("#dropdown-menu9 li").each(function(index){
            $(this).on("click",function(event){
            console.log("event",event);
            $("#dropdownMenu9 span").eq(0).html($(this).text());
                if (!$(this).hasClass("active")){
                    $("#dropdown-menu9 li").removeClass("active");
                    $(this).addClass("active");
                    loadPersonalFault($(this).text(),9);
                }
            })
        })

        $("#dropdown-menu10 li").each(function(index){
            $(this).on("click",function(event){
            console.log("event",event);
            $("#dropdownMenu2 span").eq(0).html($(this).text());
                if (!$(this).hasClass("active")){
                    $("#dropdown-menu10 li").removeClass("active");
                    $(this).addClass("active");
                    loadPersonalFault($(this).text(),10);
                }
            })
        })

        $("#dropdown-menu11 li").each(function(index){
            $(this).on("click",function(event){
            console.log("event",event);
            $("#dropdownMenu11 span").eq(0).html($(this).text());
                if (!$(this).hasClass("active")){
                    $("#dropdown-menu11 li").removeClass("active");
                    $(this).addClass("active");
                    loadPersonalFault($(this).text(),11);
                }
            })
        })
    }
    
    function loadPersonalFault(name,index){
        console.log("name",name);
        if (index == 1){
            $.ajax({
                url:"../data/penalty_age_num_0913.json",
                type: "GET", //请求方式为get
  			    dataType: "json", //返回数据格式为json
  		        success: function(res) { //请求成功完成后要执行的方法 
  				            //each循环 使用$.each方法遍历返回的数据date
                var yList = [];

                var xList = ["<14","14-18","18-30","30-40","40-50","50-60","60-70","70-75",">75"]
                res.forEach(element => {
                   if (element.penalty_class == name){
                       for (var key in element.age_num){
                           if (key != "unkown"){
                               yList.push(element.age_num[key]);
                           }
                       }
                   }
                });
                console.log("xList",xList,"yList",yList);
                var option = {
                tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                },
                // formatter: '{b0}<br />{a0}: {c0}亿元<br />{a1}: {c1}%'
                },
                grid: {
                top: '10%',
                right: '3%',
                left: '8%',
                bottom: '15%'
                },
                xAxis: [{
                type: 'category',
                name: '',
                nameTextStyle: {
                    color: "#C4E0F5"
                },
                data: xList,
                axisLine: {
                    lineStyle: {
                    color: 'rgba(255,255,255,0.12)'
                    }
                },
                axisLabel: {
                    margin: 10,
                    interval:0,
                    color: '#e2e9ff',
                    textStyle: {
                    fontSize: 11
                    },
                },
                }],
                yAxis: [
                {
                    type: 'value',
                    name: '（个）',
                    nameTextStyle: {
                    color: "#C4E0F5"
                    },
                    axisLabel: {
                    formatter: '{value}',
                    color: '#e2e9ff',
                    },
                    axisLine: {
                    show: true,
                    lineStyle: {
                        color: 'rgba(196,224,245,0.25)'
                    }
                    },
                    splitLine: {
                    show: true,
                    lineStyle: {
                        type: 'dashed',
                        color: 'rgba(196,224,245,0.45)'
                    }
                    }
                }],
                series: [{
                type: 'bar',
                data: yList,
                barWidth: '16px',
                itemStyle: {
                    normal: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                        offset: 0,
                        color: '#4DDEFE' // 0% 处的颜色
                    }, {
                        offset: 0.5,
                        color: '#57FBFA' // 50% 处的颜色
                    }, {
                        offset: 1,
                        color: '#3D8BFF' // 100% 处的颜色
                    }], false),
                    barBorderRadius: [2, 2, 0.1, 0.1],
                    shadowColor: 'rgba(0,0,0,0)',
                    shadowBlur: 4,
                    label: {
                        show: true, //开启显示
                        position: 'top', //在上方显示
                        textStyle: { //数值样式
                        color: '#4DDEFE',
                        fontSize: 10
                        }
                    },
                    }
                },

                }]
            };
                var mychart1 = echarts.init(document.getElementById("echart1"));
                mychart1.clear();
                mychart1.setOption(option);
                window.onresize = mychart1.resize();
                }
            })
       
        }else{
            $.ajax({
                url:"../data/penalty_class_definite_age_num_0913.json",
                type: "GET", //请求方式为get
  			    dataType: "json", //返回数据格式为json
  		        success: function(res) { //请求成功完成后要执行的方法 
  				            //each循环 使用$.each方法遍历返回的数据date
                var yList = [];
                var xList = ["<14","14-18","18-30","30-40","40-50","50-60","60-70","70-75",">75"]
                res.forEach((element,i) => {
                //    if (element.penalty_class == name){
                //        for (var key in element.age_num){
                //            if (key != "unkown"){
                //                yList.push(element.age_num[key]);
                //            }
                //        }
                //    }
                    if (i+2 == index){
                        element.penalty_definite_age.forEach(ele => {
                            if (ele.penalty_name_definite == name){
                                for (var key in ele){
                                 if (key != "unkown" && key != "penalty_name_definite"){
                                    yList.push(ele[key]);
                                    }
                                }
                            }
                        });
                    }
                   
                });
                console.log("xList",xList,"yList",yList);
                var option = {
                tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                },
                // formatter: '{b0}<br />{a0}: {c0}亿元<br />{a1}: {c1}%'
                },
                grid: {
                top: '10%',
                right: '3%',
                left: '8%',
                bottom: '15%'
                },
                xAxis: [{
                type: 'category',
                name: '',
                nameTextStyle: {
                    color: "#C4E0F5"
                },
                data: xList,
                axisLine: {
                    lineStyle: {
                    color: 'rgba(255,255,255,0.12)'
                    }
                },
                axisLabel: {
                    margin: 10,
                    interval:0,
                    color: '#e2e9ff',
                    textStyle: {
                    fontSize: 11
                    },
                },
                }],
                yAxis: [
                {
                    type: 'value',
                    name: '（个）',
                    nameTextStyle: {
                    color: "#C4E0F5"
                    },
                    axisLabel: {
                    formatter: '{value}',
                    color: '#e2e9ff',
                    },
                    axisLine: {
                    show: true,
                    lineStyle: {
                        color: 'rgba(196,224,245,0.25)'
                    }
                    },
                    splitLine: {
                    show: true,
                    lineStyle: {
                        type: 'dashed',
                        color: 'rgba(196,224,245,0.45)'
                    }
                    }
                }],
                series: [{
                type: 'bar',
                data: yList,
                barWidth: '16px',
                itemStyle: {
                    normal: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                        offset: 0,
                        color: '#4DDEFE' // 0% 处的颜色
                    }, {
                        offset: 0.5,
                        color: '#57FBFA' // 50% 处的颜色
                    }, {
                        offset: 1,
                        color: '#3D8BFF' // 100% 处的颜色
                    }], false),
                    barBorderRadius: [2, 2, 0.1, 0.1],
                    shadowColor: 'rgba(0,0,0,0)',
                    shadowBlur: 4,
                    label: {
                        show: true, //开启显示
                        position: 'top', //在上方显示
                        textStyle: { //数值样式
                        color: '#4DDEFE',
                        fontSize: 10
                        }
                    },
                    }
                },

                }]
            };
                var mychart1 = echarts.init(document.getElementById("echart"+index));
                mychart1.clear();
                mychart1.setOption(option);
                window.onresize = mychart1.resize();
                }
            })
        }
       
}   



</script>
</html>
